<!DOCTYPE html>
<!--[if lt IE 7]><html class="lt-ie7" lang="fr"><![endif]-->
<!--[if IE 7]><html class="ie7" lang="fr"><![endif]-->
<!--[if IE 8]><html class="ie8" lang="fr"><![endif]-->
<!--[if IE 9]><html class="ie9" lang="fr"><![endif]-->
<!--[if !IE]>-->
<html lang="en">
<!--<![endif]-->

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="dns-prefetch" href="//fonts.googleapis.com" />

  <title>iScor - How to migrate front technologies</title>
  
  <meta name="description" content="Sometimes you have to migrate front architecture, especially when you want to optimize web performance or to create a new brand image.
" />
  
  <meta name="author" content="Sebastien Correaud"/>

  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@iTweetScor" />
  <meta name="twitter:creator" content="@iTweetScor" />
  <meta name="twitter:title" content="Sebastien Correaud | Blog" />
  <meta name="twitter:description" content="The blog of a travel of code with JavaScript airlines by iScor. From Montpellier to San Francisco, with a lot of promises and web development." />
  <meta name="twitter:image:src" content="http://sebastien-correaud.herokuapp.com/img/apple/apple-touch-icon.png" />
  <meta name="twitter:image:width" content="57" />
  <meta name="twitter:image:height" content="57" />
  <meta name="twitter:url" content="http://sebastien-correaud.herokuapp.com/" />

  <meta property="og:title" content="Sebastien Correaud | Blog" />
  <meta property="og:site_name" content="iScor Blog" />
  <meta property="og:url" content="http://iscor.me" />
  <meta property="og:description" content="The blog of a travel of code with JavaScript airlines by iScor. From Montpellier to San Francisco, with a lot of promises and web development." />
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://sebastien-correaud.herokuapp.com/img/apple/apple-touch-icon.png" />

  <meta name="robots" content="index, follow" />

  <!--[if lt IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <link href="/css/index.css" rel="stylesheet" type="text/css" />
  
  <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Roboto:400,100,700" rel="stylesheet" type="text/css" />
</head>


  <body>
    <div id="site-wrapper">
      <header id="header" class="header navbar-fixed-top">
        <div class="container">
  <div class="navbar" role="navigation">
    <div class="navbar-header clearfix">
      <a class="navbar-brand" href="/" title="Home">iScor</a>
    </div>
  </div>
</div>

      </header>

      <section id="page-title" class="page-title">
        <div class="bg-title">
          <div class="container">
            <div class="title">
              <h1>How to migrate front technologies</h1>
              <small class="h4 text-muted">Direction Webpack</small>
            </div>
            <div class="breadcrumb">
              <ul>
                
                
                
                <li><a href="/">Home</a></li>
                
                
                  
                  <li  class="active"><span>how to migrate front technologies</span></li>
                  
                
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section id="content">
        <div class="container">
          <div class="row">
           <div class="col-md-8">
             <div class="primary">
              <span class="pull-xs-right label label-info">
  <span class="h5">Reading in about 5  minutes</span>
</span>

<h1 id="briefing">Briefing</h1>

<p>There were no huge specifications for this project because it was an iterative project using the Scrum method. The need of the site was reduced to a small site, but very inviting with the logic LEAN UX, including search, listings and product sheets. Plus the fact to keep in mind that the site will be expanded at a later stage. The site had to be mobile friendly.</p>

<p>The main complex problem was to include a sub module into the new site. The fact is, the two projects didn’t have the same tech stack.</p>

<h2 id="concrete-case">Concrete case</h2>

<p>Here are the migration technologies details.
The submodule has the following stack :</p>

<ul>
  <li>Bootstrap</li>
  <li>Symfony</li>
  <li>Less</li>
  <li>Selenium IDE functional tests</li>
</ul>

<p><br /></p>

<p>And the new website is developed with these technology choices :</p>

<ul>
  <li>ITCSS with Bootstrap 4 grid</li>
  <li>Symfony</li>
  <li>Sass</li>
  <li>Nightwatch.js automated testing</li>
</ul>

<p><br /></p>

<h1 id="migration">Migration</h1>

<h2 id="template-migration">Template migration</h2>

<p>First of all migrations, the template was the first thing to migrate. Even if the two environments are coded in Twig,
the principal problem was the CSS framework change. Even if the grid is the same component (the bootstrap one), some utility classes are different.</p>

<h2 id="style-migration">Style migration</h2>

<p>The second big impact was the change of the preprocessor. I use SCSS which is compiled with node-sass, the compilation will be described later in the webpack part. In the submodule, all the style is written in less.</p>

<h3 id="the-new-project-architecture">The new project architecture</h3>

<p>My SCSS is split up in different files or so called Sass partials. Working with Sass partials makes it more flexible and easier to maintain. Working like this is a way to keep a good overview on things which makes it more efficient to maintain.</p>

<p>I split things up like this :</p>

<p><img src="/assets/images/itcss.png" alt="ITCSS structure" aria-label="Assets + Scripts, Settings, Tools, Generic, Elements, Objects, Components and Trumps" class="center-block img-fluid" /></p>

<p>My <code class="highlighter-rouge">main</code> CSS file is <code class="highlighter-rouge">styles.scss</code>. The only lines of code, in this file, imports the other files. Example :</p>

<figure class="highlight"><pre><code class="language-sass" data-lang="sass"><span class="cm">/*------------------------------------*\
</span>    <span class="cm">#SETTINGS
</span><span class="err">\</span><span class="o">*</span><span class="nt">------------------------------------</span><span class="o">*/</span>

<span class="k">@import</span> <span class="s">'01-Settings/colors';</span>
<span class="k">@import</span> <span class="s">'01-Settings/typography';</span>
<span class="k">@import</span> <span class="s">'01-Settings/spacing';</span>
<span class="k">@import</span> <span class="s">'01-Settings/responsive';</span>

<span class="cm">/*------------------------------------*\
</span>    <span class="cm">#TOOLS
</span><span class="err">\</span><span class="o">*</span><span class="nt">------------------------------------</span><span class="o">*/</span>

<span class="k">@import</span> <span class="s">'02-Tools/mixins';</span>
<span class="k">@import</span> <span class="s">'02-Tools/functions';</span>
<span class="k">@import</span> <span class="s">'02-Tools/responsive';</span>
<span class="k">@import</span> <span class="s">'02-Tools/images';</span>
<span class="k">@import</span> <span class="s">'02-Tools/animations';</span>
<span class="k">@import</span> <span class="s">'02-Tools/transitions';</span></code></pre></figure>

<p>I’ve chosen the <strong>7-1 pattern</strong> approach, but I include manually all the parts because some of them are environment dependencies.</p>

<h3 id="the-old-project-approach">The old project approach</h3>

<p>I won’t describe the old structure, but how I migrate less components in the sass structure.</p>

<p>The first step was to extract the leanest part of the sass-framework to include it in the submodule. After that, the approach was to integrate less part as a component or trump in the new sass style for the submodule.</p>

<figure class="highlight"><pre><code class="language-sass" data-lang="sass"><span class="cm">/*------------------------------------*\
</span>    <span class="cm">#COMPONENTS
</span><span class="err">\</span><span class="o">*</span><span class="nt">------------------------------------</span><span class="o">*/</span>

<span class="k">@import</span> <span class="s">'06-Components/payment-block';</span></code></pre></figure>

<p><strong>The main reason for success is to not stop at the first failure display, due to pixel-perfect design !</strong></p>

<h2 id="bundle-webpack">Bundle webpack</h2>

<p>Creation of a webpack bundle permits to migrate step by step.</p>

<p>The main files are located in the <code class="highlighter-rouge">00-Assets</code> folder.</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// Load internationalization library</span>
<span class="kd">var</span> <span class="nx">I18N</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'./i18n'</span><span class="p">).</span><span class="k">default</span><span class="p">;</span>

<span class="c1">// Instanciate translator</span>
<span class="kd">var</span> <span class="nx">translator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">I18N</span><span class="p">();</span>

<span class="c1">// Translate the document</span>
<span class="nx">translator</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">I18N</span><span class="p">.</span><span class="nx">french</span><span class="p">);</span></code></pre></figure>

<p>With <em>webpack-loader</em>, the migration is easier to do. In fact, I used less-loader and sass-loader to combine old and new components. At the end of the migration, I removed useless loaders.</p>

<p>After style migration, the javascript logic was all integrated in the webpack flow, step by step (or component by component). Plus the fact that the webpack tests code quality, I also fixed some code styling and not optimized code.</p>

<h2 id="functional-tests">Functional tests</h2>

<p>Another big change was to migrate from <em>Selenium static tests</em> to an automated test process (with Nightwatch.js)</p>

<p>I used a node module to convert static Selenium test case to javascript test case. I adapted them to load common configuration and not repeat behavior.</p>

<h1 id="environments">Environments</h1>

<p>In webpack, one of the most important problem is to have multiple environments. I split the configuration into 3 parts :</p>

<h2 id="common-environment">Common environment</h2>

<p>In the common part, we can retrieve common webpack plugins and specific configuration (shared between environments)</p>

<h2 id="production-environment">Production environment</h2>

<p>In this case, I minify assets, compress and upload them to an Amazon S3 instance.</p>

<h2 id="development-environment">Development environment</h2>

<p>In this case, I don’t minify assets and use the dev version of the webpack bundle asset. I also add watch mode (for Docker or Vagrant issue) to be focused on the code.</p>

<p>I also generate automatically a styleguide directly with dev source code.</p>

<p><img src="/assets/images/styleguide_index.png" alt="Styleguide menu" />
<img src="/assets/images/styleguide_example.png" alt="Styleguide example" /></p>

<h1 id="github">Github</h1>

<p>Go to the demonstration repo for a code example. All of them will be updated all along my researches so you can use them as project dependencies.</p>

<p><a class="btn btn-link btn-block" href="https://github.com/iGitScor/how-to-migrate-front" rel="nofollow" target="_blank" title="Fork it">
    <i class="fa fa-github"></i> Fork it
  </a></p>

<p>You can also contribute to it by <strong>forking the project</strong> and make a pull request ;-)</p>


<div class="line"></div>

<div class="text-xs-center">
  <a
    class="btn btn-info"
    href="https://twitter.com/intent/tweet?text=How to migrate front technologies&url=http://iscor.me/how-to-migrate-front-technologies&via=iTweetScor&related=iTweetScor"
    rel="nofollow"
    target="_blank"
    title="Share on Twitter">
    <i class="fa fa-twitter"></i> Share on Twitter
  </a>
  <a
    class="btn btn-info"
    href="https://facebook.com/sharer.php?u=http://iscor.me/how-to-migrate-front-technologies"
    rel="nofollow"
    target="_blank"
    title="Share on Facebook">
    <i class="fa fa-facebook"></i> Share on Facebook
  </a>
  <a
    class="btn btn-info"
    href="https://plus.google.com/share?url=http://iscor.me/how-to-migrate-front-technologies"
    rel="nofollow"
    target="_blank"
    title="Share on Google+">
    <i class="fa fa-google-plus"></i> Share on Google+
  </a>
</div>

<div class="line"></div>

<div id="disqus_thread" class="p-a-2 bg-light"></div>
<script>
  var disqus_config = function () {
  // this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
  // this.page.identifier = //PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };

  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = '//iscor.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Activate JavaScript to see the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments</a>.</noscript>


            </div>
          </div>

          <div class="col-md-4">
            <div class="sidebar">
              <div class="widget-box">
                <div class="card">
                  <div class="card-block">
                    <p class="h3 card-title">Sebastien Correaud</p>
                    <span class="h4 card-subtitle text-muted">Full-stack developer</span>
                  </div>
                  <div class="card-block hidden-md-down text-md-center">
                    <img src="/assets/profile/me.svg" alt="About me" width="64" height="60">
                  </div>
                  <div class="card-block">
                    <p class="card-text">
                      <span><i class="fa fa-twitter"></i> Twitter: <a href="https://twitter.com/iTweetScor" class="card-link btn-link" target="_blank">@iTweetScor</a></span><br />
                      <span><i class="fa fa-linkedin"></i> Linkedin: <a href="https://linkedin.com/in/sebastiencorreaud" class="btn-link" target="_blank">sebastiencorreaud</a></span><br />
                      <span><i class="fa fa-github"></i> Github: <a href="https://github.com/iGitScor" class="btn-link" target="_blank">iGitScor</a></span>
                    </p>
                  </div>
                </div>
              </div>

              <div class="widget-box">
                <div class="widget-title">
                  <span>Subscribe &amp; follow me</span>
                  <div class="line"></div>
                </div>
                <div class="widget-item">
                  <span class="social"><a href="https://twitter.com/iTweetScor" target="_blank"><i class="fa fa-twitter"></i></a></span>
                  <span class="social"><a href="https://instagram.com/instaScor" target="_blank"><i class="fa fa-instagram"></i></a></span>
                  <span class="social"><a href="/feed.xml"><i class="fa fa-rss"></i></a></span>
                </div>
              </div>

              <div class="widget-box">
                <div class="widget-title">
                  <span>Recent articles</span>
                  <div class="line"></div>
                </div>
                <div class="widget-item">
                  <ul class="sidebar-post">
                   
                     <li class="item">
                       <div class="thum-img">
                         
                         <img src="/assets/articles/webpack.svg" height="80" width="80" alt="Small Thumbnail Image">
                         
                       </div>
                       <div class="post-meta">
                         <p class="h4"><a href="/how-to-migrate-front-technologies">How to migrate front technologies</a></p>
                         <p>Sometimes you have to migrate front architecture, especially when you want to optimize web performance or to create a new brand image.
</p>
                       </div>
                     </li>
                   
                     <li class="item">
                       <div class="thum-img">
                         
                         <img src="/assets/articles/ux.svg" height="80" width="80" alt="Small Thumbnail Image">
                         
                       </div>
                       <div class="post-meta">
                         <p class="h4"><a href="/user-experience-workshop">UX Workshop</a></p>
                         <p>User experience meetup around practical workshop to teach UX techniques to passionate using Carine Lallemand's book user tests.
</p>
                       </div>
                     </li>
                   
                     <li class="item">
                       <div class="thum-img">
                         
                         <img src="/assets/articles/sfo.svg" height="80" width="80" alt="Small Thumbnail Image">
                         
                       </div>
                       <div class="post-meta">
                         <p class="h4"><a href="/from-montpellier-to-san-francisco">From Montpellier to San Francisco</a></p>
                         <p>Presentation of the professional travel from Montpellier (France) to San Francisco (USA) of a front-end developer specialized in JavaScript.
</p>
                       </div>
                     </li>
                   
                  </ul>
                </div>
              </div>

               <div class="widget-box">
                <div class="widget-title">
                  <span>Tag Cloud</span>
                  <div class="line"></div>
                </div>
                <div class="widget-item">
                  <div class="tagcloud">
                    
                    
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#flight-ref">flight</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#flupa-ref">flupa</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#front-ref">front</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#javascript-community-ref">javascript community</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#meteor-ref">meteor</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#migration-ref">migration</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#montpellier-ref">montpellier</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#sanfrancisco-ref">sanfrancisco</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#user-experience-ref">user experience</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#ux-community-ref">ux community</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#uxdesign-ref">uxdesign</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#web-performance-ref">web performance</a>
                     
                    
                      
                      
                      <a class="btn-light-sm" href="/tags.html#webpack-ref">webpack</a>
                     
                    
                      
                    
                  </div>
                </div>
              </div>

               <div class="widget-box">
                 <div class="widget-title">
                   <span>Categories</span>
                   <div class="line"></div>
                 </div>
                 <div class="widget-item">
                   <ul class="category-list">
                     
                     
                       
                         <li class="cat-item"><a href="/categories.html#travel-ref">Travel <span>(1)</span></a></li>
                       
                         <li class="cat-item"><a href="/categories.html#workshop-ref">Workshop <span>(1)</span></a></li>
                       
                         <li class="cat-item"><a href="/categories.html#technical-ref">Technical <span>(1)</span></a></li>
                       
                     
                     
                   </ul>
                 </div>
               </div>

             </div>
           </div>
         </div>
       </div>
      </section>

      <footer id="footer" class="footer">
        <div class="container">
  <div class="footer-nav">
    <nav class="nav navbar-nav sm">
      <a href="/">Home</a>
      <a href="slides/web-performance.html">Slides</a>
      <a href="about.html">About me</a>
    </nav>
  </div>
  <div class="copyright">
    <span>Copyright 2016, All rights reserved - iScor</span>
  </div>
</div>

      </footer>
    </div>

    
    <script id="dsq-count-scr" src="//iscor.disqus.com/count.js" async></script>
    
  </body>

</html>

